dataset_version: "0.2.0"

# Where to write dataset exports (public + private).
# The build command writes to: {export_root}/{dataset_version}/(public|private)
export_root: "provetok/data/exports"

tracks:
  A:
    name: "vision"
    # Tiered release strategy:
    # - core: small, strongly-audited subset used for main benchmark results
    # - extended: large pool used for coverage/robustness/leakage audits
    core_size: 80
    extended_size: 1000
    # S2-first candidate retrieval (docs/S2).
    s2:
      keywords:
        - "vision transformer"
        - "resnet"
        - "convnet"
        - "self-supervised"
        - "object detection"
        - "segmentation"
        - "masked autoencoder"
        - "contrastive learning"
      fields_of_study:
        - "Computer Science"
      year_from: 2009
      year_to: 2025
      min_citation_count: 0
      open_access_pdf_only: false
      max_results: 4000
  B:
    name: "sequence_modeling"
    core_size: 80
    extended_size: 1000
    s2:
      keywords:
        - "language model"
        - "transformer"
        - "attention"
        - "seq2seq"
        - "rnn"
        - "lstm"
        - "bert"
        - "gpt"
        - "machine translation"
        - "text generation"
      fields_of_study:
        - "Computer Science"
        - "Linguistics"
      year_from: 2009
      year_to: 2025
      min_citation_count: 0
      open_access_pdf_only: false
      max_results: 4000

sources:
  primary: "s2"
  s2:
    base_url: "https://ai4scholar.net/graph/v1"
    api_key_env: "S2_API_KEY"
    rate_limit_qps: 1
    enable_batch_enrich: true
    # paper/batch hard limit = 500 ids per request.
    batch_chunk_size: 500
  pwc_dump:
    # Optional: local Papers-with-Code dump for auxiliary QA cross-checks.
    enable: false
    dump_path: ""
  arxiv:
    oai_base_url: "https://export.arxiv.org/oai2"
    use_oai_pmh: true
    use_api_fallback: true
    rate_limit_qps: 1

selection:
  topic_coverage_k: 16
  backfill_pool_multiplier: 3.0
  centrality_weights:
    pagerank: 1.0
    indegree: 0.5
    # Approximate "burst/growth" via citations-per-year (normalized).
    citation_velocity: 0.3
    # Approximate "bridge" via cross-community neighbor ratio (concept-community proxy).
    bridge: 0.2
  # Optional JSONL/YAML file describing manual include/exclude decisions.
  manual_decisions_file: ""

fulltext:
  # Tier policies (preferred). Each is one of: "none" | "arxiv_only" | "arxiv_and_author_pdf"
  core:
    policy: "arxiv_and_author_pdf"
    # Hard constraint: if fulltext download fails, exclude and backfill.
    require_success: true
  extended:
    policy: "arxiv_and_author_pdf"
    # Hard constraint: if fulltext download fails, exclude and backfill.
    require_success: true
  # Default (tier override)
  require_success: true
  # Legacy fallback (kept for backwards compatibility)
  policy: "arxiv_and_author_pdf"
  # Optional YAML mapping paper keys -> author PDF URLs.
  author_pdf_overrides_file: ""
  max_pdf_mb: 50
  timeout_sec: 60

record_build:
  # one of: "llm" | "legacy_milestones"
  mode: "llm"
  # Strict mode: require a real LLM for public record generation.
  # - When true, missing API key will fail the online pipeline.
  require_llm: true
  # Strict mode: require `background` to be a paraphrase (no fallback-to-abstract).
  strict_paraphrase: true
  # Retries for LLM extraction/paraphrase when JSON parsing or policy checks fail.
  max_retries: 2
  llm_model: "deepseek-chat"
  llm_api_base: "https://api.deepseek.com/v1"
  llm_api_key_env: "LLM_API_KEY"
  prompt_version: "v1"
  # Optional: forbid citation-like name fingerprints in public text fields.
  forbid_names: false
  # Allowlist substrings (case-insensitive) to suppress name-fingerprint hits (advanced use).
  name_allowlist: []

sdg:
  enable_l1: true
  enable_l2: true
  enable_l3: true

qa:
  edge_coverage_threshold: 0.2
  schema_pass_rate_required: 1.0
  consistency_pass_rate_required: 0.95
  # Optional gate (Core only): if < 1.0, fail build when too many mechanism tags fall back to "other".
  taxonomy_other_ratio_max_core: 1.0

seeds:
  public_seeds: [42, 43, 44]
  private_seeds: []
